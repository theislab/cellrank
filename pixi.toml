# Pixi environments for conda-dependent CI (PETSc/SLEPc, R).
# Main development uses hatch/uv; pixi is CI-only.

[project]
name = "cellrank"
channels = ["conda-forge"]
platforms = ["linux-64", "osx-arm64"]

[feature.slepc.dependencies]
petsc = "*"
slepc = "*"
petsc4py = "*"
slepc4py = "*"
mpi4py = "*"

[feature.slepc.pypi-dependencies]
cellrank = { path = ".", editable = true }

[feature.slepc.tasks]
test = "pytest tests/ -v -m petsc"

[feature.r.dependencies]
r-mgcv = "*"
rpy2 = "*"

[feature.r.pypi-dependencies]
cellrank = { path = ".", editable = true }

[feature.r.tasks]
test = "pytest tests/ -v -m r"

[environments]
slepc = ["slepc"]
r = ["r"]
